<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Twotter | {{ user }}</title>
    <style>
      html, body { min-width: 100vw; min-height: 100vh; overflow-x: hidden;
      margin: 0; padding: 0; border: 0; }
    </style>
    <!-- STYLES -->
  </head>
  <body>
    <% include("../components/nav.art", { variant: 3, isLoggedIn, user }) %>
    
    <main class="p-8 flex flex-col items-center gap-8">
      <h3 class="font-bold text-lg text-zinc-700">{{ user }}'s posts:</h3>
      <ul class="flex flex-col gap-4 w-full md:w-1/2 lg:w-1/3">
        {{each posts}}
        <% include("../components/post.art", { post: $value, redirect: "/user/" + user, user: currentUser }) %>
        {{/each}}

        <% if (isLoggedIn && user === currentUser) { %>
        <li class="w-full">
          <form class="gap-4" method="POST">
            <textarea id="post-value" class="w-full rounded-tr-3xl rounded-bl-3xl border-2 p-4 focus:border-yellow-300 focus:outline-none min-h-20 max-h-90" name="content" placeholder="What are you thinking about?" maxlength="500" autocomplete="off" oninput="document.getElementById('remaining-characters').innerText = 500 - document.getElementById('post-value').value.length + (document.getElementById('post-value').value.length === 499 ? ' remaining character' : ' remaining characters')"></textarea>
            <p class="w-full text-right text-sm mb-4 mt-1" id="remaining-characters">500 remaining characters</p>
            <button class="w-full rounded-tr-3xl rounded-bl-3xl bg-yellow-300 text-zinc-700 py-2 focus:outline-none hover:bg-yellow-200 focus:bg-yellow-200" type="submit">Twoot!</button>
          </form>
        </li>
        <% } %>
      </ul>
    </main>
  </body>
</html>